
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Faleminderit për porosinë - TRUST UC</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f3f4f6; /* Light background */
      color: #333; /* Dark text */
      text-align: center;
      padding: 40px;
    }
    h2 {
      color: #0066cc; /* Trust UC blue */
    }
    #status {
      margin-top: 20px;
      font-weight: bold;
      font-size: 20px;
    }
    .btn {
      padding: 10px 20px;
      background-color: #0066cc;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }
    .btn:hover {
      background-color: #005bb5;
    }
  </style>
</head>
<body>
  <h2>✅ Faleminderit për porosinë!</h2>
  <p>Ju falenderojmë për besimin që keni treguar në TRUST UC. Jemi të lumtur që mundëm t'ju ofrojmë shërbimin tonë.</p>
  <p>UC tani është duke u dërguar në llogarinë tuaj PUBG...</p>

  <div id="status"></div>

  <button class="btn" onclick="location.href='/';">Kthehu në Faqen Kryesore</button>

  <div id="payment-methods" style="margin-top: 30px;"></div>

  <script>
    async function sendUC(pubgId, ucAmount) {
      const spuMap = {
        "30": 123456789,
        "60": 184566477,
        "325": 184566478,
        "660": 184566479,
        "1800": 184566480
      };

      const order = {
        spuId: spuMap[ucAmount],
        gameAccountInfo: {
          account: pubgId,
          roleName: "TRUSTUC"
        },
        quantity: 1,
        externalOrderNumber: "trustuc-" + Date.now(),
        buyerRemark: ucAmount + " UC Auto",
        region: "GLOBAL"
      };

      const res = await fetch("https://openapi.u7buy.com/open-api/game_service_order/create_order", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Basic YWJwMTIzOm15U2VjcmV0"
        },
        body: JSON.stringify(order)
      });

      const data = await res.json();
      document.getElementById("status").innerText =
        data.code === "000000"
          ? "✅ UC u dërgua me sukses!"
          : "❌ Dështoi dërgimi: " + data.message;
    }

    const urlParams = new URLSearchParams(window.location.search);
    const pubgId = urlParams.get("pubgId");
    const ucAmount = urlParams.get("amount");

    if (pubgId && ucAmount) {
      sendUC(pubgId, ucAmount);
    } else {
      document.getElementById("status").innerText = "❌ Mungojnë të dhënat për porosinë!";
    }

    // Logic for PayPal and Stripe visibility
    function showPaymentMethods(amount) {
      const paymentMethods = document.getElementById("payment-methods");
      if (amount >= 5) {
        paymentMethods.innerHTML = `
          <button class="btn" onclick="window.location.href='/pay-with-stripe?amount=${amount}'">Paguaj me Stripe</button><br><br>
          <button class="btn" onclick="window.location.href='/pay-with-paypal?amount=${amount}'">Paguaj me PayPal</button>
        `;
      } else {
        paymentMethods.innerHTML = `
          <button class="btn" onclick="window.location.href='/pay-with-stripe?amount=${amount}'">Paguaj me Stripe</button>
        `;
      }
    }

    // Call showPaymentMethods for the amount
    if (ucAmount) {
      showPaymentMethods(parseFloat(ucAmount));
    }
  </script>
</body>
</html>
