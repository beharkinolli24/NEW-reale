<!-- vetëm fragmenti i fetch-it është ndryshuar -->
<script>
function pay(key){
  const pubgId = document.getElementById("pubg"+key).value.trim();
  if(!pubgId){ alert("Plotëso PUBG ID."); return; }

  const item  = products[key];
  const price = parseFloat(item.price);

  fetch("/.netlify/functions/createCheckoutSession",{     <!-- ✅ emri i ri -->
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      playerId : pubgId,
      ucAmount : item.uc,
      amount   : price
    })
  })
  .then(r => r.json())
  .then(d => {
    if(!d.url){ alert("❌ "+(d.error||'Nuk u krijua session.')); return; }
    window.location = d.url;
  })
  .catch(err => alert("Error: "+err.message));
}
</script>
